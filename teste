
> appatleta@0.1.0 dev
> next dev

   â–² Next.js 16.0.7 (Turbopack)
   - Local:         http://localhost:3000
   - Network:       http://192.168.15.70:3000
   - Environments: .env.local

 âœ“ Starting...
 âœ“ Ready in 1488ms
 GET /app/arena/agendamentos/agenda 200 in 3.5s (compile: 3.2s, render: 334ms)
[GCS] Storage inicializado com sucesso
[GCS] Storage inicializado com sucesso
Executed query {
  text: 'SELECT \n' +
    '      q.id, q.nome, q."pointId", q.tipo, q.capacidade, q.ativo, \n' +
    '      q."tiposEsporte", q."createdAt", q."updatedAt",\n' +
    '      p.id as "point_id", p.nome as "point_nome"\n' +
    '    FROM "Quadra" q\n' +
    '    LEFT JOIN "Point" p ON q."pointId" = p.id WHERE q."pointId" = $1 ORDER BY q.nome ASC',
  duration: 1222,
  rows: 2
}
 GET /api/quadra?pointId=2d77100f-aec8-45ca-b802-fcc964f539a9 200 in 2.5s (compile: 1045ms, proxy.ts: 157ms, render: 1266ms)
Executed query {
  text: 'SELECT \n' +
    '      q.id, q.nome, q."pointId", q.tipo, q.capacidade, q.ativo, \n' +
    '      q."tiposEsporte", q."createdAt", q."updatedAt",\n' +
    '      p.id as "point_id", p.nome as "point_nome"\n' +
    '    FROM "Quadra" q\n' +
    '    LEFT JOIN "Point" p ON q."pointId" = p.id WHERE q."pointId" = $1 ORDER BY q.nome ASC',
  duration: 1364,
  rows: 2
}
 GET /api/quadra?pointId=2d77100f-aec8-45ca-b802-fcc964f539a9 200 in 2.6s (compile: 1020ms, proxy.ts: 135ms, render: 1406ms)
Executed query {
  text: 'SELECT \n' +
    '      a.id, a."quadraId", a."usuarioId", a."atletaId", a."nomeAvulso", a."telefoneAvulso",\n' +
    '      a."dataHora", a.duracao, a."valorHora", a."valorCalculado", a."valorNegociado",\n' +
    '      a.status, a.observacoes, a."createdAt", a."updatedAt", a."createdById", a."updatedById", a."recorrenciaId", a."recorrenciaConfig", a."ehAula", a."professorId",\n' +
    '      q.id as "quadra_id", q.nome as "quadra_nome", q."pointId" as "quadra_pointId",\n' +
    '      p.id as "point_id", p.nome as "point_nome", p."logoUrl" as "point_logoUrl",\n' +
    '      u.id as "usuario_id", u.name as "usuario_name", u.email as "usuario_email",\n' +
    '      at.id as "atleta_id", at.nome as "atleta_nome", at.fone as "atleta_fone", at."usuarioId" as "atleta_usuarioId",\n' +
    '      pr.id as "professor_id", pr."userId" as "professor_userId", pr.especialidade as "professor_especialidade",\n' +
    '      pr.bio as "professor_bio", pr."valorHora" as "professor_valorHora", pr.ativo as "professor_ativo",\n' +
    '      up.id as "professor_usuario_id", up.name as "professor_usuario_name", up.email as "professor_usuario_email",\n' +
    '      uc.id as "createdBy_user_id", uc.name as "createdBy_user_name", uc.email as "createdBy_user_email",\n' +
    '      uu.id as "updatedBy_user_id", uu.name as "updatedBy_user_name", uu.email as "updatedBy_user_email"\n' +
    '    FROM "Agendamento" a\n' +
    '    LEFT JOIN "Quadra" q ON a."quadraId" = q.id\n' +
    '    LEFT JOIN "Point" p ON q."pointId" = p.id\n' +
    '    LEFT JOIN "User" u ON a."usuarioId" = u.id\n' +
    '    LEFT JOIN "Atleta" at ON a."atletaId" = at.id\n' +
    '    LEFT JOIN "Professor" pr ON a."professorId" = pr.id\n' +
    '    LEFT JOIN "User" up ON pr."userId" = up.id\n' +
    '    LEFT JOIN "User" uc ON a."createdById" = uc.id\n' +
    '    LEFT JOIN "User" uu ON a."updatedById" = uu.id\n' +
    '    WHERE 1=1 AND a."dataHora" >= $1 AND a."dataHora" <= $2 AND a.status = $3 AND q."pointId" = $4 ORDER BY a."dataHora" ASC',
  duration: 1511,
  rows: 1
}
Executed query {
  text: 'SELECT \n' +
    '      a.id, a."quadraId", a."usuarioId", a."atletaId", a."nomeAvulso", a."telefoneAvulso",\n' +
    '      a."dataHora", a.duracao, a."valorHora", a."valorCalculado", a."valorNegociado",\n' +
    '      a.status, a.observacoes, a."createdAt", a."updatedAt", a."createdById", a."updatedById", a."recorrenciaId", a."recorrenciaConfig", a."ehAula", a."professorId",\n' +
    '      q.id as "quadra_id", q.nome as "quadra_nome", q."pointId" as "quadra_pointId",\n' +
    '      p.id as "point_id", p.nome as "point_nome", p."logoUrl" as "point_logoUrl",\n' +
    '      u.id as "usuario_id", u.name as "usuario_name", u.email as "usuario_email",\n' +
    '      at.id as "atleta_id", at.nome as "atleta_nome", at.fone as "atleta_fone", at."usuarioId" as "atleta_usuarioId",\n' +
    '      pr.id as "professor_id", pr."userId" as "professor_userId", pr.especialidade as "professor_especialidade",\n' +
    '      pr.bio as "professor_bio", pr."valorHora" as "professor_valorHora", pr.ativo as "professor_ativo",\n' +
    '      up.id as "professor_usuario_id", up.name as "professor_usuario_name", up.email as "professor_usuario_email",\n' +
    '      uc.id as "createdBy_user_id", uc.name as "createdBy_user_name", uc.email as "createdBy_user_email",\n' +
    '      uu.id as "updatedBy_user_id", uu.name as "updatedBy_user_name", uu.email as "updatedBy_user_email"\n' +
    '    FROM "Agendamento" a\n' +
    '    LEFT JOIN "Quadra" q ON a."quadraId" = q.id\n' +
    '    LEFT JOIN "Point" p ON q."pointId" = p.id\n' +
    '    LEFT JOIN "User" u ON a."usuarioId" = u.id\n' +
    '    LEFT JOIN "Atleta" at ON a."atletaId" = at.id\n' +
    '    LEFT JOIN "Professor" pr ON a."professorId" = pr.id\n' +
    '    LEFT JOIN "User" up ON pr."userId" = up.id\n' +
    '    LEFT JOIN "User" uc ON a."createdById" = uc.id\n' +
    '    LEFT JOIN "User" uu ON a."updatedById" = uu.id\n' +
    '    WHERE 1=1 AND a."dataHora" >= $1 AND a."dataHora" <= $2 AND a.status = $3 AND q."pointId" = $4 ORDER BY a."dataHora" ASC',
  duration: 1661,
  rows: 1
}
Executed query {
  text: 'SELECT \n' +
    '      b.id, b."pointId", b."quadraIds", b.titulo, b.descricao,\n' +
    '      b."dataInicio", b."dataFim", b."horaInicio", b."horaFim",\n' +
    '      b.ativo, b."createdAt", b."updatedAt",\n' +
    '      p.id as "point_id", p.nome as "point_nome"\n' +
    '    FROM "BloqueioAgenda" b\n' +
    '    LEFT JOIN "Point" p ON b."pointId" = p.id\n' +
    '    WHERE 1=1 AND b."pointId" = $1 AND b."dataFim" >= $2 AND b."dataInicio" <= $3 AND b.ativo = true ORDER BY b."dataInicio" ASC, b."createdAt" DESC',
  duration: 1805,
  rows: 0
}
 GET /api/bloqueio-agenda?dataInicio=2026-01-07T00:00:00.000Z&dataFim=2026-01-11T23:59:59.999Z&apenasAtivos=true 200 in 3.0s (compile: 1036ms, proxy.ts: 151ms, render: 1846ms)
Executed query {
  text: 'SELECT \n' +
    '          id, nome, endereco, telefone, email, descricao, "logoUrl", "cardTemplateUrl", latitude, longitude, ativo,\n' +
    '          "whatsappAccessToken", "whatsappPhoneNumberId", "whatsappBusinessAccountId", "whatsappApiVersion", "whatsappAtivo",\n' +
    '          "gzappyApiKey", "gzappyInstanceId", "gzappyAtivo",\n' +
    '          "enviarLembretesAgendamento", "antecedenciaLembrete",\n' +
    '          "infinitePayHandle",\n' +
    '          assinante, "createdAt", "updatedAt"\n' +
    '        FROM "Point"\n' +
    '        WHERE id = $1',
  duration: 782,
  rows: 1
}
 GET /api/point/2d77100f-aec8-45ca-b802-fcc964f539a9 200 in 3.1s (compile: 2.2s, proxy.ts: 135ms, render: 790ms)
Executed query {
  text: 'SELECT \n' +
    '      b.id, b."pointId", b."quadraIds", b.titulo, b.descricao,\n' +
    '      b."dataInicio", b."dataFim", b."horaInicio", b."horaFim",\n' +
    '      b.ativo, b."createdAt", b."updatedAt",\n' +
    '      p.id as "point_id", p.nome as "point_nome"\n' +
    '    FROM "BloqueioAgenda" b\n' +
    '    LEFT JOIN "Point" p ON b."pointId" = p.id\n' +
    '    WHERE 1=1 AND b."pointId" = $1 AND b."dataFim" >= $2 AND b."dataInicio" <= $3 AND b.ativo = true ORDER BY b."dataInicio" ASC, b."createdAt" DESC',
  duration: 853,
  rows: 0
}
 GET /api/bloqueio-agenda?dataInicio=2026-01-07T00:00:00.000Z&dataFim=2026-01-11T23:59:59.999Z&apenasAtivos=true 200 in 869ms (compile: 4ms, proxy.ts: 6ms, render: 859ms)
Executed query {
  text: 'SELECT \n' +
    '          id, nome, endereco, telefone, email, descricao, "logoUrl", "cardTemplateUrl", latitude, longitude, ativo,\n' +
    '          "whatsappAccessToken", "whatsappPhoneNumberId", "whatsappBusinessAccountId", "whatsappApiVersion", "whatsappAtivo",\n' +
    '          "gzappyApiKey", "gzappyInstanceId", "gzappyAtivo",\n' +
    '          "enviarLembretesAgendamento", "antecedenciaLembrete",\n' +
    '          "infinitePayHandle",\n' +
    '          assinante, "createdAt", "updatedAt"\n' +
    '        FROM "Point"\n' +
    '        WHERE id = $1',
  duration: 835,
  rows: 1
}
 GET /api/point/2d77100f-aec8-45ca-b802-fcc964f539a9 200 in 874ms (compile: 28ms, proxy.ts: 5ms, render: 841ms)
[GCS] Storage inicializado com sucesso
Executed query {
  text: 'SELECT \n' +
    '            aa."agendamentoId", aa.id, aa."atletaId", aa."nomeAvulso", aa."telefoneAvulso", aa."createdAt",\n' +
    '            at.id as "atleta_id", at.nome as "atleta_nome", at.fone as "atleta_fone", \n' +
    '            at."usuarioId" as "atleta_usuarioId", at."fotoUrl" as "atleta_fotoUrl",\n' +
    '            u.id as "usuario_id", u.name as "usuario_name", u.email as "usuario_email"\n' +
    '          FROM "AgendamentoAtleta" aa\n' +
    '          LEFT JOIN "Atleta" at ON aa."atletaId" = at.id\n' +
    '          LEFT JOIN "User" u ON at."usuarioId" = u.id\n' +
    '          WHERE aa."agendamentoId" = ANY($1::text[])\n' +
    '          ORDER BY aa."agendamentoId", aa."createdAt" ASC',
  duration: 874,
  rows: 0
}
[GET /api/agendamento] Buscando participantes para 1 agendamentos
[GET /api/agendamento] Encontrados 0 registros de participantes
 GET /api/agendamento?dataInicio=2026-01-07T00:00:00.000Z&dataFim=2026-01-11T23:59:59.999Z&status=CONFIRMADO 200 in 3.4s (compile: 948ms, proxy.ts: 10ms, render: 2.4s)
Executed query {
  text: 'SELECT \n' +
    '            aa."agendamentoId", aa.id, aa."atletaId", aa."nomeAvulso", aa."telefoneAvulso", aa."createdAt",\n' +
    '            at.id as "atleta_id", at.nome as "atleta_nome", at.fone as "atleta_fone", \n' +
    '            at."usuarioId" as "atleta_usuarioId", at."fotoUrl" as "atleta_fotoUrl",\n' +
    '            u.id as "usuario_id", u.name as "usuario_name", u.email as "usuario_email"\n' +
    '          FROM "AgendamentoAtleta" aa\n' +
    '          LEFT JOIN "Atleta" at ON aa."atletaId" = at.id\n' +
    '          LEFT JOIN "User" u ON at."usuarioId" = u.id\n' +
    '          WHERE aa."agendamentoId" = ANY($1::text[])\n' +
    '          ORDER BY aa."agendamentoId", aa."createdAt" ASC',
  duration: 868,
  rows: 0
}
[GET /api/agendamento] Buscando participantes para 1 agendamentos
[GET /api/agendamento] Encontrados 0 registros de participantes
 GET /api/agendamento?dataInicio=2026-01-07T00:00:00.000Z&dataFim=2026-01-11T23:59:59.999Z&status=CONFIRMADO 200 in 3.8s (compile: 1037ms, proxy.ts: 158ms, render: 2.6s)
Executed query {
  text: 'SELECT \n' +
    '      q.id, q.nome, q."pointId", q.tipo, q.capacidade, q.ativo, \n' +
    '      q."tiposEsporte", q."createdAt", q."updatedAt",\n' +
    '      p.id as "point_id", p.nome as "point_nome"\n' +
    '    FROM "Quadra" q\n' +
    '    LEFT JOIN "Point" p ON q."pointId" = p.id WHERE q."pointId" = $1 ORDER BY q.nome ASC',
  duration: 246,
  rows: 2
}
 GET /api/quadra 200 in 279ms (compile: 10ms, proxy.ts: 15ms, render: 254ms)
Executed query {
  text: 'SELECT DISTINCT ON (a.id) a.*, \n' +
    '              u.id as "usuario_id", \n' +
    '              u.name as "usuario_name", \n' +
    '              u.email as "usuario_email", \n' +
    '              u.role as "usuario_role" \n' +
    '       FROM "Atleta" a \n' +
    '       LEFT JOIN "User" u ON a."usuarioId" = u.id \n' +
    '       LEFT JOIN "AtletaPoint" ap ON a.id = ap."atletaId"\n' +
    '       WHERE (a."pointIdPrincipal" = $1 OR ap."pointId" = $1)\n' +
    '       ORDER BY a.id, a.nome ASC',
  duration: 354,
  rows: 52
}
Executed query {
  text: 'SELECT p.*, \n' +
    '            u.id as "usuario_id",\n' +
    '            u.name as "usuario_name",\n' +
    '            u.email as "usuario_email",\n' +
    '            u.role as "usuario_role"\n' +
    '     FROM "Professor" p\n' +
    '     LEFT JOIN "User" u ON p."userId" = u.id\n' +
    '     WHERE p.ativo = $1 AND (p."pointIdPrincipal" = $2 OR EXISTS (\n' +
    '      SELECT 1 FROM "ProfessorPoint" pp \n' +
    '      WHERE pp."professorId" = p.id AND pp."pointId" = $2\n' +
    '    ))\n' +
    '     ORDER BY p."createdAt" DESC',
  duration: 273,
  rows: 2
}
Executed query {
  text: 'SELECT ap."atletaId", p.id, p.nome, p."logoUrl"\n' +
    '       FROM "AtletaPoint" ap\n' +
    '       JOIN "Point" p ON ap."pointId" = p.id\n' +
    '       WHERE ap."atletaId" = ANY($1::text[])\n' +
    '       ORDER BY ap."atletaId", p.nome ASC',
  duration: 875,
  rows: 56
}
Executed query {
  text: 'SELECT p.*, \n' +
    '            u.id as "usuario_id",\n' +
    '            u.name as "usuario_name",\n' +
    '            u.email as "usuario_email",\n' +
    '            u.role as "usuario_role"\n' +
    '     FROM "Professor" p\n' +
    '     LEFT JOIN "User" u ON p."userId" = u.id\n' +
    '     WHERE p.id = $1',
  duration: 878,
  rows: 1
}
Executed query {
  text: 'SELECT p.*, \n' +
    '            u.id as "usuario_id",\n' +
    '            u.name as "usuario_name",\n' +
    '            u.email as "usuario_email",\n' +
    '            u.role as "usuario_role"\n' +
    '     FROM "Professor" p\n' +
    '     LEFT JOIN "User" u ON p."userId" = u.id\n' +
    '     WHERE p.id = $1',
  duration: 1023,
  rows: 1
}
Executed query {
  text: 'SELECT \n' +
    '          a.id, a."quadraId", a."usuarioId", a."atletaId", a."nomeAvulso", a."telefoneAvulso",\n' +
    '          a."dataHora", a.duracao, a."valorHora", a."valorCalculado", a."valorNegociado",\n' +
    '          a.status, a.observacoes, a."ehAula", a."professorId", a."createdAt", a."updatedAt", a."createdById", a."updatedById",\n' +
    '          q.id as "quadra_id", q.nome as "quadra_nome", q."pointId" as "quadra_pointId",\n' +
    '          p.id as "point_id", p.nome as "point_nome", p."logoUrl" as "point_logoUrl",\n' +
    '          u.id as "usuario_id", u.name as "usuario_name", u.email as "usuario_email",\n' +
    '          at.id as "atleta_id", at.nome as "atleta_nome", at.fone as "atleta_fone", at."usuarioId" as "atleta_usuarioId",\n' +
    '          pr.id as "professor_id", pr."userId" as "professor_userId", pr.especialidade as "professor_especialidade",\n' +
    '          pr.bio as "professor_bio", pr."valorHora" as "professor_valorHora", pr.ativo as "professor_ativo",\n' +
    '          up.id as "professor_usuario_id", up.name as "professor_usuario_name", up.email as "professor_usuario_email",\n' +
    '          uc.id as "createdBy_user_id", uc.name as "createdBy_user_name", uc.email as "createdBy_user_email",\n' +
    '          uu.id as "updatedBy_user_id", uu.name as "updatedBy_user_name", uu.email as "updatedBy_user_email"\n' +
    '        FROM "Agendamento" a\n' +
    '        LEFT JOIN "Quadra" q ON a."quadraId" = q.id\n' +
    '        LEFT JOIN "Point" p ON q."pointId" = p.id\n' +
    '        LEFT JOIN "User" u ON a."usuarioId" = u.id\n' +
    '        LEFT JOIN "Atleta" at ON a."atletaId" = at.id\n' +
    '        LEFT JOIN "Professor" pr ON a."professorId" = pr.id\n' +
    '        LEFT JOIN "User" up ON pr."userId" = up.id\n' +
    '        LEFT JOIN "User" uc ON a."createdById" = uc.id\n' +
    '        LEFT JOIN "User" uu ON a."updatedById" = uu.id\n' +
    '        WHERE a.id = $1',
  duration: 702,
  rows: 1
}
Executed query {
  text: 'SELECT id, nome, "logoUrl" FROM "Point" WHERE id = ANY($1::text[])',
  duration: 588,
  rows: 2
}
 GET /api/atleta/listarAtletas 200 in 2.0s (compile: 196ms, proxy.ts: 15ms, render: 1837ms)
Executed query {
  text: 'SELECT p.id, p.nome, p."logoUrl"\n' +
    '       FROM "ProfessorPoint" pp\n' +
    '       JOIN "Point" p ON pp."pointId" = p.id\n' +
    '       WHERE pp."professorId" = $1\n' +
    '       ORDER BY p.nome ASC',
  duration: 588,
  rows: 1
}
Executed query {
  text: 'SELECT p.id, p.nome, p."logoUrl"\n' +
    '       FROM "ProfessorPoint" pp\n' +
    '       JOIN "Point" p ON pp."pointId" = p.id\n' +
    '       WHERE pp."professorId" = $1\n' +
    '       ORDER BY p.nome ASC',
  duration: 586,
  rows: 1
}
Executed query {
  text: 'SELECT "pointId" FROM "Quadra" WHERE id = $1',
  duration: 580,
  rows: 1
}
Executed query {
  text: 'SELECT id, nome, "logoUrl" FROM "Point" WHERE id = $1',
  duration: 429,
  rows: 1
}
Executed query {
  text: 'SELECT id, nome, "logoUrl" FROM "Point" WHERE id = $1',
  duration: 430,
  rows: 1
}
 GET /api/professor?ativo=true 200 in 2.8s (compile: 413ms, proxy.ts: 14ms, render: 2.3s)
Executed query {
  text: 'SELECT \n' +
    '          aa.id, aa."atletaId", aa."nomeAvulso", aa."telefoneAvulso", aa."createdAt",\n' +
    '          at.id as "atleta_id", at.nome as "atleta_nome", at.fone as "atleta_fone", \n' +
    '          at."usuarioId" as "atleta_usuarioId", at."fotoUrl" as "atleta_fotoUrl",\n' +
    '          u.id as "usuario_id", u.name as "usuario_name", u.email as "usuario_email"\n' +
    '        FROM "AgendamentoAtleta" aa\n' +
    '        LEFT JOIN "Atleta" at ON aa."atletaId" = at.id\n' +
    '        LEFT JOIN "User" u ON at."usuarioId" = u.id\n' +
    '        WHERE aa."agendamentoId" = $1\n' +
    '        ORDER BY aa."createdAt" ASC',
  duration: 438,
  rows: 0
}
 GET /api/agendamento/e688ac96-8aeb-4e47-aa70-c7052e4f06e5 200 in 2.9s (compile: 1156ms, proxy.ts: 13ms, render: 1731ms)
Executed query {
  text: 'SELECT \n' +
    '      a.id, a."quadraId", a."usuarioId", a."atletaId", a."nomeAvulso", a."telefoneAvulso",\n' +
    '      a."dataHora", a.duracao, a."valorHora", a."valorCalculado", a."valorNegociado",\n' +
    '      a.status, a.observacoes, a."createdAt", a."updatedAt", a."createdById", a."updatedById", a."recorrenciaId", a."recorrenciaConfig", a."ehAula", a."professorId",\n' +
    '      q.id as "quadra_id", q.nome as "quadra_nome", q."pointId" as "quadra_pointId",\n' +
    '      p.id as "point_id", p.nome as "point_nome", p."logoUrl" as "point_logoUrl",\n' +
    '      u.id as "usuario_id", u.name as "usuario_name", u.email as "usuario_email",\n' +
    '      at.id as "atleta_id", at.nome as "atleta_nome", at.fone as "atleta_fone", at."usuarioId" as "atleta_usuarioId",\n' +
    '      pr.id as "professor_id", pr."userId" as "professor_userId", pr.especialidade as "professor_especialidade",\n' +
    '      pr.bio as "professor_bio", pr."valorHora" as "professor_valorHora", pr.ativo as "professor_ativo",\n' +
    '      up.id as "professor_usuario_id", up.name as "professor_usuario_name", up.email as "professor_usuario_email",\n' +
    '      uc.id as "createdBy_user_id", uc.name as "createdBy_user_name", uc.email as "createdBy_user_email",\n' +
    '      uu.id as "updatedBy_user_id", uu.name as "updatedBy_user_name", uu.email as "updatedBy_user_email"\n' +
    '    FROM "Agendamento" a\n' +
    '    LEFT JOIN "Quadra" q ON a."quadraId" = q.id\n' +
    '    LEFT JOIN "Point" p ON q."pointId" = p.id\n' +
    '    LEFT JOIN "User" u ON a."usuarioId" = u.id\n' +
    '    LEFT JOIN "Atleta" at ON a."atletaId" = at.id\n' +
    '    LEFT JOIN "Professor" pr ON a."professorId" = pr.id\n' +
    '    LEFT JOIN "User" up ON pr."userId" = up.id\n' +
    '    LEFT JOIN "User" uc ON a."createdById" = uc.id\n' +
    '    LEFT JOIN "User" uu ON a."updatedById" = uu.id\n' +
    '    WHERE 1=1 AND a."quadraId" = $1 AND a."dataHora" >= $2 AND a."dataHora" <= $3 AND a.status = $4 AND q."pointId" = $5 ORDER BY a."dataHora" ASC',
  duration: 227,
  rows: 1
}
Executed query {
  text: 'SELECT \n' +
    '      b.id, b."pointId", b."quadraIds", b.titulo, b.descricao,\n' +
    '      b."dataInicio", b."dataFim", b."horaInicio", b."horaFim",\n' +
    '      b.ativo, b."createdAt", b."updatedAt",\n' +
    '      p.id as "point_id", p.nome as "point_nome"\n' +
    '    FROM "BloqueioAgenda" b\n' +
    '    LEFT JOIN "Point" p ON b."pointId" = p.id\n' +
    '    WHERE 1=1 AND b."pointId" = $1 AND b."dataFim" >= $2 AND b."dataInicio" <= $3 AND b.ativo = true ORDER BY b."dataInicio" ASC, b."createdAt" DESC',
  duration: 363,
  rows: 0
}
 GET /api/bloqueio-agenda?dataInicio=2026-01-07T00:00:00&dataFim=2026-01-07T23:59:59&apenasAtivos=true 200 in 394ms (compile: 13ms, proxy.ts: 13ms, render: 368ms)
Executed query {
  text: 'SELECT \n' +
    '      tp.id, tp."quadraId", tp."inicioMinutoDia", tp."fimMinutoDia", \n' +
    '      tp."valorHora", tp."valorHoraAula", tp.ativo, tp."createdAt", tp."updatedAt",\n' +
    '      q.id as "quadra_id", q.nome as "quadra_nome", q."pointId" as "quadra_pointId"\n' +
    '    FROM "TabelaPreco" tp\n' +
    '    LEFT JOIN "Quadra" q ON tp."quadraId" = q.id WHERE q."pointId" = $1 AND tp."quadraId" = $2 ORDER BY tp."inicioMinutoDia" ASC',
  duration: 380,
  rows: 2
}
 GET /api/tabela-preco?quadraId=0bda0d39-1e9c-4d50-a4c8-7d3f3b6be354 200 in 538ms (compile: 137ms, proxy.ts: 12ms, render: 388ms)
Executed query {
  text: 'SELECT \n' +
    '            aa."agendamentoId", aa.id, aa."atletaId", aa."nomeAvulso", aa."telefoneAvulso", aa."createdAt",\n' +
    '            at.id as "atleta_id", at.nome as "atleta_nome", at.fone as "atleta_fone", \n' +
    '            at."usuarioId" as "atleta_usuarioId", at."fotoUrl" as "atleta_fotoUrl",\n' +
    '            u.id as "usuario_id", u.name as "usuario_name", u.email as "usuario_email"\n' +
    '          FROM "AgendamentoAtleta" aa\n' +
    '          LEFT JOIN "Atleta" at ON aa."atletaId" = at.id\n' +
    '          LEFT JOIN "User" u ON at."usuarioId" = u.id\n' +
    '          WHERE aa."agendamentoId" = ANY($1::text[])\n' +
    '          ORDER BY aa."agendamentoId", aa."createdAt" ASC',
  duration: 433,
  rows: 0
}
[GET /api/agendamento] Buscando participantes para 1 agendamentos
[GET /api/agendamento] Encontrados 0 registros de participantes
 GET /api/agendamento?quadraId=0bda0d39-1e9c-4d50-a4c8-7d3f3b6be354&dataInicio=2026-01-07T00:00:00&dataFim=2026-01-07T23:59:59&status=CONFIRMADO 200 in 690ms (compile: 10ms, proxy.ts: 13ms, render: 667ms)
[API PUT] ========== INÃCIO PUT /api/agendamento/[id] ==========
[API PUT] ID do agendamento: e688ac96-8aeb-4e47-aa70-c7052e4f06e5
Executed query {
  text: 'SELECT "usuarioId", "quadraId", "recorrenciaId", "recorrenciaConfig", "ehAula", "professorId" FROM "Agendamento" WHERE id = $1',
  duration: 993,
  rows: 1
}
Executed query {
  text: 'SELECT "pointId" FROM "Quadra" WHERE id = $1',
  duration: 141,
  rows: 1
}
[API PUT] Recebido payload: {
  "observacoes": null,
  "atletaId": "16494c22-cb8f-4e0f-b5e9-6fac740be49d",
  "nomeAvulso": null,
  "telefoneAvulso": null,
  "valorNegociado": "66.00",
  "valorHora": 66,
  "valorCalculado": 66,
  "atletasParticipantesIds": [
    "0add2b91-fbbf-4baa-abd0-d1c3c0ad8fb0"
  ],
  "participantesAvulsos": [
    {
      "nome": "ana"
    }
  ],
  "ehAula": false,
  "professorId": null
}
Executed query {
  text: 'SELECT "dataHora", "recorrenciaId", "recorrenciaConfig", "quadraId", "usuarioId", "atletaId", "nomeAvulso", "telefoneAvulso", duracao, "valorHora", "valorCalculado", "valorNegociado", observacoes FROM "Agendamento" WHERE id = $1',
  duration: 141,
  rows: 1
}
[API] dataHoraAtualRecorrencia (apÃ³s normalizarDataHora): 2026-01-07T15:00:00.000Z timestamp: 1767798000000
[API] Verificando condiÃ§Ãµes: {
  temRecorrenciaAtual: false,
  aplicarARecorrencia: false,
  temRecorrencia: false,
  temTipo: undefined,
  recorrenciaIdAtual: null
}
[API PUT] Executando UPDATE simples com SQL: UPDATE "Agendamento"
                   SET observacoes = $1, "atletaId" = $2, "nomeAvulso" = $3, "telefoneAvulso" = $4, "valorHora" = $5, "valorCalculado" = $6, "valorNegociado" = $7, "ehAula" = $8, "professorId" = $9, "updatedAt" = NOW(), "updatedById" = $10
                   WHERE id = $11
                   RETURNING id, "quadraId", "usuarioId", "atletaId", "nomeAvulso", "telefoneAvulso",
                     "dataHora", duracao, "valorHora", "valorCalculado", "valorNegociado",
                     status, observacoes, "createdAt", "updatedAt"
[API PUT] ParÃ¢metros: [
  null,
  '16494c22-cb8f-4e0f-b5e9-6fac740be49d',
  null,
  null,
  66,
  66,
  '66.00',
  false,
  null,
  'f94986c8-0dd1-4721-b568-c42abb0e9e6e',
  'e688ac96-8aeb-4e47-aa70-c7052e4f06e5'
]
Executed query {
  text: 'UPDATE "Agendamento"\n' +
    '                   SET observacoes = $1, "atletaId" = $2, "nomeAvulso" = $3, "telefoneAvulso" = $4, "valorHora" = $5, "valorCalculado" = $6, "valorNegociado" = $7, "ehAula" = $8, "professorId" = $9, "updatedAt" = NOW(), "updatedById" = $10\n' +
    '                   WHERE id = $11\n' +
    '                   RETURNING id, "quadraId", "usuarioId", "atletaId", "nomeAvulso", "telefoneAvulso",\n' +
    '                     "dataHora", duracao, "valorHora", "valorCalculado", "valorNegociado",\n' +
    '                     status, observacoes, "createdAt", "updatedAt"',
  duration: 145,
  rows: 1
}
Executed query {
  text: 'SELECT \n' +
    '            a.id, a."quadraId", a."usuarioId", a."atletaId", a."nomeAvulso", a."telefoneAvulso",\n' +
    '            a."dataHora", a.duracao, a."valorHora", a."valorCalculado", a."valorNegociado",\n' +
    '            a.status, a.observacoes, a."recorrenciaId", a."recorrenciaConfig", a."createdAt", a."updatedAt",\n' +
    '            q.id as "quadra_id", q.nome as "quadra_nome", q."pointId" as "quadra_pointId",\n' +
    '            p.id as "point_id", p.nome as "point_nome", p."logoUrl" as "point_logoUrl",\n' +
    '            u.id as "usuario_id", u.name as "usuario_name", u.email as "usuario_email",\n' +
    '            at.id as "atleta_id", at.nome as "atleta_nome", at.fone as "atleta_fone"\n' +
    '          FROM "Agendamento" a\n' +
    '          LEFT JOIN "Quadra" q ON a."quadraId" = q.id\n' +
    '          LEFT JOIN "Point" p ON q."pointId" = p.id\n' +
    '          LEFT JOIN "User" u ON a."usuarioId" = u.id\n' +
    '          LEFT JOIN "Atleta" at ON a."atletaId" = at.id\n' +
    '          WHERE a.id = $1',
  duration: 143,
  rows: 1
}
[CORS DEBUG] Origin recebida: http://localhost:3000
[CORS DEBUG] Origens permitidas: [
  'http://localhost:3001',
  'https://appatleta.vercel.app',
  'http://localhost:3000',
  'http://localhost:5173'
]
[CORS DEBUG] NODE_ENV: development
[CORS DEBUG] Ã‰ localhost? true
[CORS DEBUG] Origem permitida? true
[CORS DEBUG] Match exato? true
[CORS DEBUG] allowedOrigins.length: 4
[CORS DEBUG] envOrigins existe? true
[CORS DEBUG] âœ… Origem permitida - adicionando headers CORS
 PUT /api/agendamento/e688ac96-8aeb-4e47-aa70-c7052e4f06e5 200 in 1681ms (compile: 18ms, proxy.ts: 6ms, render: 1657ms)
Executed query {
  text: 'SELECT \n' +
    '      a.id, a."quadraId", a."usuarioId", a."atletaId", a."nomeAvulso", a."telefoneAvulso",\n' +
    '      a."dataHora", a.duracao, a."valorHora", a."valorCalculado", a."valorNegociado",\n' +
    '      a.status, a.observacoes, a."createdAt", a."updatedAt", a."createdById", a."updatedById", a."recorrenciaId", a."recorrenciaConfig", a."ehAula", a."professorId",\n' +
    '      q.id as "quadra_id", q.nome as "quadra_nome", q."pointId" as "quadra_pointId",\n' +
    '      p.id as "point_id", p.nome as "point_nome", p."logoUrl" as "point_logoUrl",\n' +
    '      u.id as "usuario_id", u.name as "usuario_name", u.email as "usuario_email",\n' +
    '      at.id as "atleta_id", at.nome as "atleta_nome", at.fone as "atleta_fone", at."usuarioId" as "atleta_usuarioId",\n' +
    '      pr.id as "professor_id", pr."userId" as "professor_userId", pr.especialidade as "professor_especialidade",\n' +
    '      pr.bio as "professor_bio", pr."valorHora" as "professor_valorHora", pr.ativo as "professor_ativo",\n' +
    '      up.id as "professor_usuario_id", up.name as "professor_usuario_name", up.email as "professor_usuario_email",\n' +
    '      uc.id as "createdBy_user_id", uc.name as "createdBy_user_name", uc.email as "createdBy_user_email",\n' +
    '      uu.id as "updatedBy_user_id", uu.name as "updatedBy_user_name", uu.email as "updatedBy_user_email"\n' +
    '    FROM "Agendamento" a\n' +
    '    LEFT JOIN "Quadra" q ON a."quadraId" = q.id\n' +
    '    LEFT JOIN "Point" p ON q."pointId" = p.id\n' +
    '    LEFT JOIN "User" u ON a."usuarioId" = u.id\n' +
    '    LEFT JOIN "Atleta" at ON a."atletaId" = at.id\n' +
    '    LEFT JOIN "Professor" pr ON a."professorId" = pr.id\n' +
    '    LEFT JOIN "User" up ON pr."userId" = up.id\n' +
    '    LEFT JOIN "User" uc ON a."createdById" = uc.id\n' +
    '    LEFT JOIN "User" uu ON a."updatedById" = uu.id\n' +
    '    WHERE 1=1 AND a."dataHora" >= $1 AND a."dataHora" <= $2 AND a.status = $3 AND q."pointId" = $4 ORDER BY a."dataHora" ASC',
  duration: 143,
  rows: 1
}
Executed query {
  text: 'SELECT \n' +
    '      b.id, b."pointId", b."quadraIds", b.titulo, b.descricao,\n' +
    '      b."dataInicio", b."dataFim", b."horaInicio", b."horaFim",\n' +
    '      b.ativo, b."createdAt", b."updatedAt",\n' +
    '      p.id as "point_id", p.nome as "point_nome"\n' +
    '    FROM "BloqueioAgenda" b\n' +
    '    LEFT JOIN "Point" p ON b."pointId" = p.id\n' +
    '    WHERE 1=1 AND b."pointId" = $1 AND b."dataFim" >= $2 AND b."dataInicio" <= $3 AND b.ativo = true ORDER BY b."dataInicio" ASC, b."createdAt" DESC',
  duration: 277,
  rows: 0
}
 GET /api/bloqueio-agenda?dataInicio=2026-01-07T00:00:00.000Z&dataFim=2026-01-11T23:59:59.999Z&apenasAtivos=true 200 in 313ms (compile: 12ms, proxy.ts: 18ms, render: 283ms)
Executed query {
  text: 'SELECT \n' +
    '            aa."agendamentoId", aa.id, aa."atletaId", aa."nomeAvulso", aa."telefoneAvulso", aa."createdAt",\n' +
    '            at.id as "atleta_id", at.nome as "atleta_nome", at.fone as "atleta_fone", \n' +
    '            at."usuarioId" as "atleta_usuarioId", at."fotoUrl" as "atleta_fotoUrl",\n' +
    '            u.id as "usuario_id", u.name as "usuario_name", u.email as "usuario_email"\n' +
    '          FROM "AgendamentoAtleta" aa\n' +
    '          LEFT JOIN "Atleta" at ON aa."atletaId" = at.id\n' +
    '          LEFT JOIN "User" u ON at."usuarioId" = u.id\n' +
    '          WHERE aa."agendamentoId" = ANY($1::text[])\n' +
    '          ORDER BY aa."agendamentoId", aa."createdAt" ASC',
  duration: 279,
  rows: 0
}
[GET /api/agendamento] Buscando participantes para 1 agendamentos
[GET /api/agendamento] Encontrados 0 registros de participantes
 GET /api/agendamento?dataInicio=2026-01-07T00:00:00.000Z&dataFim=2026-01-11T23:59:59.999Z&status=CONFIRMADO 200 in 454ms (compile: 7ms, proxy.ts: 18ms, render: 429ms)
Deseja finalizar o arquivo em lotes (S/N)? [?25h

